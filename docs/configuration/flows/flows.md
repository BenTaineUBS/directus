# Flows

> Flows enable event-driven data processing and task automation.

[[toc]]

<!--
::: Before You Begin

[Learn Directus](/getting-started/learn-directus)

:::
-->

## What's a Flow?

<video autoplay muted loop controls title="">
	<source src="https://cdn.directus.io/" type="video/mp4" />
</video>

Flows enable custom, event-driven data processing and task automation within Directus. Each Flow is composed of one
Trigger, followed by a series of Operations.

The Trigger defines an event which starts the flow. This could be some event or action within the app, an incoming
webhook, a scheduled timer for cron jobs, or some other event. Please see the documentation on
[Triggers](/configuration/flows/triggers) for more details.

Operations are the actions performed after the Trigger, which include things like creating new Items in a Collection,
sending off emails, pushing in-app notifications, and sending webhooks, just to name a few options. You can even set up
divergent chains of Flow Operations, which execute conditionally, based on whether one Operation passed or failed. To
ensure data is passed on as expected, a [console log](configuration/flows/operations/#log-to-console) is also included
to help design and troubleshoot your Flows. Please see the documentation on
[Operations](/configuration/flows/operations) for more details.

Once a Flow is triggered, a [Flow JSON Object](#the-flow-object) is created which stores data from the Trigger event.
Then as each Operation in the flow executes, the data generated is added onto this Flow Object. Every Operation in a
Flow has access to this Flow Object.

## Create a Flow

<video autoplay muted loop controls title="">
	<source src="https://cdn.directus.io/" type="video/mp4" />
</video>

To create a Flow, follow these steps:

1. Navigate to **"Settings > Flows"** and click <span mi btn>add</span> in the Page Header. A side menu will appear.
2. Under **Flow Setup**, fill in a name for the Flow.\
   Optional: Set a status, material icon, description or color to help remember the Flow.
3. Select your **Activity and Logs Tracking** preference as desired.\
   To learn more, please see [Activity](/reference/system/activity/) and [Logs](/#logs).
4. Click <span mi btn>arrow_forward</span> to navigate to **Trigger Setup**, select a
   [Trigger](configuration/flows/triggers) type and configure as desired.
5. Click <span mi btn>done</span> in the Menu Header and you will be taken to the Flow Grid Area.\
   A Trigger Panel will be on the Flow Grid.
6. On the Trigger Panel, click <span mi>add</span> and the **Create Operation** side menu will open.
7. Set a name, select the [Operation](configuration/flows/operations) type, and configure as desired.\
   The unique name will be converted into an Operation Key, used on the [Flow Object](#the-flow-object).\
   If no name is set, one will be auto-generated for you.
8. When done, click <span mi btn>done</span> in the Page Header to confirm and return to the Flow Grid Area.
9. On the newly created Operation Panel:
   - Click <span mi icon>add</span> to add Operation after successful execution of the current Operation.
   - Click <span mi icon>remove</span> to add Operation after a failed execution of the the current Operation.
10. Repeat steps 8-10 to create your Flow as desired.

## The Flow Object

<video autoplay muted loop controls title="">
	<source src="https://cdn.directus.io/" type="video/mp4" />
</video>

When a Flow is triggered, a JSON object is created to store all data generated within the Flow. When you create an
Operation, you are required to add a unique name for it, which into turned into a key. This key is used to add the
associated Operation's data onto the Flows Object. Each Operation in the Flow has access to the Flows Object, and
therefore the data generated from the preceding Operations.

This following is an example of a simple Flow with two Operations. The `$trigger`, `$last`, and `$accountability` keys
are included on every Flow, though their values will differ. The name and number of Operation keys will obviously depend
on how you configure your Flow and whether each Operation executes successfully and actually appends data onto the Flow
Object.

```JSON
{
    "$trigger": {}, // Data generated by the Flow's Trigger.
    "$last": null, // Data from the last Operation in the flow, for easy access!
    "$accountability": {}, // Provides details on who/what tripped the Trigger and generated this Flow Object.
    "operation_key": { // The data (if any) generated by the first Operation.
			"some_nested_key": "Some nested value.",
    },
	"operation_key_2": null, // Value is null if no data was generated from an Operation.
}
```

### Flow Variables

The Flow Object's keys serve as variables, allowing data access from every Flow Operation.

```JSON
{
    "operation_key_3": {{$trigger}}
}
```

You can even use dot-notation to extract sub-nested values.

```JSON
{
    "operation_key_3": {{operation_key.some_nested_key}}
}
```

## Logs

<video autoplay muted loop controls title="">
	<source src="https://cdn.directus.io/" type="video/mp4" />
</video>

As seen in the Sidebar, Logs store information each time the Flow executes. Each log will display information from
Triggers as well as each Operation.
